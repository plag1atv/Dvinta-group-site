{% extends "base.html" %}
{% block content %}

<section class="bg-gradient-to-br from-gray-50 to-white py-16">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="max-w-3xl">
      <h1 class="text-4xl lg:text-5xl font-bold text-[#0d1321] mb-6">
        Онлайн-заявка
      </h1>
      <p class="text-lg text-gray-600">
        Заполните форму — мы уточним детали и свяжемся с вами. Чем больше исходных данных, тем точнее сроки и стоимость.
      </p>
    </div>
  </div>
</section>

<section class="py-16 bg-white">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">

    {% if success %}
    <div class="mb-10 rounded-2xl border border-gray-200 bg-gray-50 p-6">
      <div class="flex items-start gap-3">
        <i data-lucide="check-circle-2" class="w-6 h-6 text-[#3e5c76] mt-0.5"></i>
        <div>
          <p class="font-semibold text-[#0d1321]">Заявка принята</p>
          <p class="text-sm text-gray-600 mt-1">
            Мы получили вашу заявку. В ближайшее время свяжемся с вами для уточнения деталей.
          </p>
        </div>
      </div>
    </div>
    {% endif %}

    <div class="grid lg:grid-cols-3 gap-10 items-start">

      <!-- Левая колонка: форма -->
      <div class="lg:col-span-2 bg-white rounded-3xl border border-gray-200 p-8">
        <h2 class="text-2xl font-bold text-[#0d1321] mb-2">Заполните данные</h2>
        <p class="text-sm text-gray-600 mb-8">
          Поля со звёздочкой обязательны. Мы используем контакты только для связи по заявке.
        </p>

        <form id="onlineAppForm" method="post" action="{{ url_for('metrology_online_application') }}" novalidate class="space-y-6">

          <div class="grid sm:grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Имя *</label>
              <input name="name" id="fName" type="text" required
                     class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#3e5c76] focus:border-transparent"
                     placeholder="Как к вам обращаться?" />
              <p class="mt-2 text-xs text-red-600 hidden" data-err-for="fName">Укажите имя</p>
            </div>

            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Компания</label>
              <input name="company" id="fCompany" type="text"
                     class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#3e5c76] focus:border-transparent"
                     placeholder="ООО / ИП (если есть)" />
            </div>
          </div>

          <div class="grid sm:grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Телефон *</label>
              <input name="phone" id="fPhone" type="tel" required
                     class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#3e5c76] focus:border-transparent"
                     placeholder="+7 (___) ___-__-__" />
              <p class="mt-2 text-xs text-red-600 hidden" data-err-for="fPhone">Укажите телефон (минимум 10 цифр)</p>
            </div>

            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Email *</label>
              <input name="email" id="fEmail" type="email" required
                     class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#3e5c76] focus:border-transparent"
                     placeholder="name@example.com" />
              <p class="mt-2 text-xs text-red-600 hidden" data-err-for="fEmail">Укажите корректный email</p>
            </div>
          </div>

          <div class="grid sm:grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Услуга *</label>
              <select name="service" id="fService" required
                      class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#3e5c76] focus:border-transparent bg-white">
                <option value="">Выберите услугу</option>
                <option value="verification">Поверка</option>
                <option value="calibration">Калибровка</option>
                <option value="type-approval">Утверждение типа</option>
                <option value="equipment-testing">Испытания оборудования</option>
                <option value="other">Другое</option>
              </select>
              <p class="mt-2 text-xs text-red-600 hidden" data-err-for="fService">Выберите услугу</p>
            </div>

            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Количество (шт)</label>
              <input name="qty" id="fQty" type="number" min="1" value="1"
                     class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#3e5c76] focus:border-transparent"
                     placeholder="Например: 5" />
            </div>
          </div>

          <div class="grid sm:grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Город / Регион</label>
              <input name="region" id="fRegion" type="text"
                     class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#3e5c76] focus:border-transparent"
                     placeholder="Например: Москва" />
            </div>

            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Срочность</label>
              <select name="urgency" id="fUrgency"
                      class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#3e5c76] focus:border-transparent bg-white">
                <option value="normal">Обычная</option>
                <option value="urgent">Срочно</option>
                <option value="asap">Как можно быстрее</option>
              </select>
            </div>
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Описание заявки *</label>
            <textarea name="message" id="fMessage" rows="6" required
                      class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:outline-none focus:ring-2 focus:ring-[#3e5c76] focus:border-transparent"
                      placeholder="Тип оборудования, модель, диапазоны, требования к документам, дополнительные условия..."></textarea>
            <p class="mt-2 text-xs text-red-600 hidden" data-err-for="fMessage">Опишите заявку (минимум 10 символов)</p>
          </div>

          <div class="rounded-2xl border border-gray-200 bg-gray-50 p-5">
            <div class="flex items-start gap-3">
              <i data-lucide="shield-check" class="w-5 h-5 text-[#3e5c76] mt-0.5"></i>
              <p class="text-sm text-gray-600">
                Нажимая “Отправить”, вы соглашаетесь на обработку персональных данных и получение ответа по указанным контактам.
              </p>
            </div>
          </div>

          <button type="submit" class="btn-primary inline-flex items-center justify-center w-full">
            <i data-lucide="send" class="w-5 h-5 mr-2"></i>
            Отправить заявку
          </button>

          <p id="formTopError" class="text-sm text-red-600 hidden">
            Проверьте поля формы — есть ошибки.
          </p>
        </form>
      </div>

      <!-- Правая колонка: подсказки -->
      <aside class="bg-gray-50 rounded-3xl border border-gray-100 p-8">
        <h3 class="text-xl font-bold text-[#0d1321] mb-4">Что указать, чтобы мы ответили быстрее</h3>

        <div class="space-y-4">
          <div class="flex items-start gap-3">
            <i data-lucide="list-checks" class="w-5 h-5 text-[#3e5c76] mt-0.5"></i>
            <p class="text-sm text-gray-600">Перечень СИ: модель, диапазон, класс точности, количество.</p>
          </div>
          <div class="flex items-start gap-3">
            <i data-lucide="file-text" class="w-5 h-5 text-[#3e5c76] mt-0.5"></i>
            <p class="text-sm text-gray-600">Какие документы нужны: протокол, сертификат, отметки и т.п.</p>
          </div>
          <div class="flex items-start gap-3">
            <i data-lucide="calendar" class="w-5 h-5 text-[#3e5c76] mt-0.5"></i>
            <p class="text-sm text-gray-600">Сроки: обычный/срочно/к конкретной дате.</p>
          </div>
          <div class="flex items-start gap-3">
            <i data-lucide="truck" class="w-5 h-5 text-[#3e5c76] mt-0.5"></i>
            <p class="text-sm text-gray-600">Логистика: доставка, самовывоз, упаковка.</p>
          </div>
        </div>

        <div class="mt-8 p-6 rounded-2xl border border-gray-200 bg-white">
          <p class="font-semibold text-[#0d1321] mb-2">Альтернатива</p>
          <p class="text-sm text-gray-600 mb-4">Если удобнее — напишите напрямую:</p>
          <div class="space-y-2 text-sm">
            <div class="flex items-center gap-2">
              <i data-lucide="mail" class="w-4 h-4 text-[#3e5c76]"></i>
              <span class="text-gray-600">info@your-company.ru</span>
            </div>
            <div class="flex items-center gap-2">
              <i data-lucide="phone" class="w-4 h-4 text-[#3e5c76]"></i>
              <span class="text-gray-600">+7 (___) ___-__-__</span>
            </div>
          </div>
        </div>
      </aside>

    </div>
  </div>
</section>

<script src="{{ url_for('static', filename='js/online_application_validate.js') }}"></script>

{% endblock %}
